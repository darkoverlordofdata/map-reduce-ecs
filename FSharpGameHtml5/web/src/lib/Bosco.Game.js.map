{"version":3,"sources":["..\\..\\..\\lib\\Bosco.Game.fs"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;6CAW+D;AAAA;;AAAA;AAAA;AAAA;AAA1D;AAAA;AAAI;AAAgB;AAApB;AACD;AACA;AACA;AACA,4BAAe,sCAAf;AACG;AAgBsB;AACR;AAtBhB;AAA8D;;;;yCAyB3D;AAAA;AAAkB;;;kCAKlB;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,kLAAuB;AAAA;AAAA;AAA+C;AAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACA,wCACI;AAAA;;AACA;;AACA;AAAA;;AAAA;AAAU;AAAU,iBAHxB;AAIE;;;+CA5BE;AAAA;;AAAI,wBAAG,qBAAH;AACR;AACY,6BAAC,aAAD;AACZ,mCAAe,oBAAf;AACA,mCAAe,wBAAf;;AACA,oBAAG,oBAAH,EACI;AAAA;AACA;AACA;AAAkB;;AAEtB,6CAAkD;AAAA;AAAA;AAAO,qBAAP;AAAO,iBAAzD;AACA;AACA;AACA;AAbK;;;;;;;;;;;iCAeE;AAAA;AAAG","file":"Bosco.Game.js","sourcesContent":["namespace Bosco\r\n#if HTML5\r\nopen Fable.Core\r\nopen Fable.Import\r\nopen Fable.Import.Browser\r\nopen Fable.Core.JsInterop\r\n#endif\r\nopen System.Collections.Generic\r\n\r\n(** Abstrct Game *)\r\n[<AbstractClass>]\r\ntype Game(width, height, images:Dictionary<string, string>) as this =\r\n    let mutable previousTime = 0.0\r\n    let mutable elapsedTime = 0.0\r\n    let mutable totalFrames = 0\r\n    let renderer = PIXI.WebGLRenderer(width, height)\r\n    do document.body.appendChild(renderer.view) |> ignore        \r\n    let rec animate timeStamp =\r\n        let t = if previousTime>0.0 then previousTime else timeStamp\r\n        previousTime <- timeStamp\r\n        let delta = (timeStamp - t) * 0.001\r\n        totalFrames <- totalFrames + 1\r\n        elapsedTime <- elapsedTime + delta\r\n        if elapsedTime > 1.0 then\r\n            this.fps <- totalFrames\r\n            totalFrames <- 0\r\n            elapsedTime <- 0.0\r\n\r\n        window.requestAnimationFrame(FrameRequestCallback animate) |> ignore\r\n        this.Update(delta)\r\n        this.Draw(delta)\r\n        renderer.render(this.spriteBatch)\r\n    member val spriteBatch = PIXI.Container()\r\n    member val fps = 0 with get,set\r\n    [<DefaultValue>]val mutable Content:obj\r\n    member this.Initialize() =\r\n        this.LoadContent()\r\n    abstract member LoadContent: unit -> unit\r\n    abstract member Update: float -> unit\r\n    abstract member Draw: float -> unit\r\n    member this.Run() =\r\n        for image in images do PIXI.Globals.loader?add(image.Key, image.Value) |> ignore    \r\n        PIXI.Globals.loader.load(System.Func<_,_,_>(fun loader resources ->\r\n            this.Content <- resources\r\n            this.Initialize()\r\n            animate 0. |> ignore\r\n        ))\r\n\r\n"]}